<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Smart Life Multi-Language Chat</title>

<style>
body{
  margin:0;
  font-family:system-ui,-apple-system,"Segoe UI","Cairo",sans-serif;
  background:#0b1220;
  color:#fff;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  transition:.3s ease;
}

/* HEADER */
header{
  padding:20px;
  border-bottom:1px solid rgba(255,255,255,.1);
  display:flex;
  align-items:center;
}

html[dir="rtl"] header{
  flex-direction:row;
  justify-content:space-between;
}

html[dir="ltr"] header{
  flex-direction:row-reverse;
  justify-content:space-between;
}

/* MAIN */
main{
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:center;
  padding:40px;
}

html[dir="rtl"] main{ text-align:right; }
html[dir="ltr"] main{ text-align:left; }

/* LANGUAGE BUTTON */
.dir-toggle{
  padding:8px 14px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08);
  color:#fff;
  cursor:pointer;
  font-weight:600;
}
</style>
</head>

<body>

<header>
  <h2 id="title">Ø³Ù…Ø§Ø±Øª Ù„Ø§ÙŠÙ</h2>
  <button id="dirToggleBtn" class="dir-toggle">ğŸŒ English</button>
</header>

<main>
  <h1 id="headline">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ğŸ‘‹</h1>
  <p id="desc">Ø§Ù„Ø¢Ù† Ø³ÙŠØªÙ… ØªØºÙŠÙŠØ± ØªÙ…ÙˆØ¶Ø¹ Ø§Ù„Ø´Ø§Øª Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©.</p>
</main>

<!-- Bird dynamic loader -->
<script>
/* ======== Ø¶Ø¹ Ù‡Ù†Ø§ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¯Ø¬Øª ======== */
const AR_WIDGET_URL = "PUT_ARABIC_WIDGET_CONFIG_URL_HERE";
const EN_WIDGET_URL = "PUT_ENGLISH_WIDGET_CONFIG_URL_HERE";
/* ===================================== */

let currentScript = null;

function loadBirdWidget(locale){

  // Ø­Ø°Ù Ø§Ù„Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¥Ù† ÙˆØ¬Ø¯
  if(currentScript){
    currentScript.remove();
  }

  // Ø­Ø°Ù Ø£ÙŠ iframe Ø³Ø§Ø¨Ù‚
  document.querySelectorAll("iframe").forEach(f=>{
    if(f.src && f.src.includes("bird")){
      f.remove();
    }
  });

  const script = document.createElement("script");
  script.src = "https://embeddables.p.mbirdcdn.net/sdk/v0/bird-sdk.js";
  script.setAttribute("data-config-url",
    locale === "ar" ? AR_WIDGET_URL : EN_WIDGET_URL
  );
  script.defer = true;

  document.head.appendChild(script);
  currentScript = script;
}

/* ======== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ ======== */
const toggleBtn = document.getElementById("dirToggleBtn");
const html = document.documentElement;

function updateDirection(dir){
  const lang = dir === "rtl" ? "ar" : "en";

  html.setAttribute("dir", dir);
  html.setAttribute("lang", lang);

  if(lang === "ar"){
    toggleBtn.textContent = "ğŸŒ English";
    document.getElementById("headline").textContent = "Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ğŸ‘‹";
    document.getElementById("desc").textContent = "Ø§Ù„Ø¢Ù† Ø³ÙŠØªÙ… ØªØºÙŠÙŠØ± ØªÙ…ÙˆØ¶Ø¹ Ø§Ù„Ø´Ø§Øª Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ù„ØºØ©.";
  } else {
    toggleBtn.textContent = "ğŸŒ Ø¹Ø±Ø¨ÙŠ";
    document.getElementById("headline").textContent = "Welcome ğŸ‘‹";
    document.getElementById("desc").textContent = "Chat position now changes correctly.";
  }

  localStorage.setItem("site_lang", lang);
  loadBirdWidget(lang);
}

/* ======== ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù„ØºØ© Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© ======== */
const savedLang = localStorage.getItem("site_lang") || "ar";
updateDirection(savedLang === "ar" ? "rtl" : "ltr");

/* ======== Ø­Ø¯Ø« Ø§Ù„Ø²Ø± ======== */
toggleBtn.addEventListener("click", ()=>{
  const currentDir = html.getAttribute("dir");
  updateDirection(currentDir === "rtl" ? "ltr" : "rtl");
});
</script>

</body>
</html>
